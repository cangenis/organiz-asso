{"ast":null,"code":"var _jsxFileName = \"/Users/cangenis/projet-web-genis-ozgenc/client/src/pages/ProfilePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport Post from \"../components/Post\";\nimport NewPost from \"../components/NewPost\";\nimport { getUsersPostsRoute, getUserRoute } from \"../utils/APIRoutes\";\nimport \"../styles/ProfilePage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Profile() {\n  _s();\n  const {\n    userId: profileUserId\n  } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [profileUser, setProfileUser] = useState({});\n  const {\n    user,\n    token\n  } = useAuth();\n  const addNewPost = newPost => {\n    setPosts(prevPosts => [newPost, ...prevPosts]); // Add the new post to the top of the list\n  };\n  const removePostFromState = postId => {\n    setPosts(prevPosts => prevPosts.filter(post => post._id !== postId));\n  };\n  const fetchProfile = async () => {\n    try {\n      const response = await axios.get(`${getUserRoute}/${profileUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setProfileUser(response.data);\n    } catch (error) {\n      console.error(\"Error fetching profile:\", error);\n    }\n  };\n  const fetchUsersPosts = async () => {\n    try {\n      const response = await axios.get(`${getUsersPostsRoute}/${profileUserId}/posts`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n    fetchUsersPosts();\n  }, [profileUserId, token]); // Depend on profileUserId and token to re-fetch if they change\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: \"#25547e\"\n        },\n        children: \"Organiz'Asso Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), \" \", profileUser.firstName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Surname:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), \" \", profileUser.lastName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), \" \", profileUser.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Location:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), \" \", profileUser.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Occupation:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), \" \", profileUser.occupation]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/profile/${profileUserId}/friends`,\n        className: \"friends-button\",\n        children: \"Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), user._id === profileUserId && /*#__PURE__*/_jsxDEV(NewPost, {\n      onPostSuccess: addNewPost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        color: \"#25547e\"\n      },\n      children: \"Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n      postData: post,\n      removePost: removePostFromState\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true);\n}\n_s(Profile, \"ozc8ky108TxTYegWUJiODysFHd8=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","useAuth","Post","NewPost","getUsersPostsRoute","getUserRoute","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","userId","profileUserId","posts","setPosts","profileUser","setProfileUser","user","token","addNewPost","newPost","prevPosts","removePostFromState","postId","filter","post","_id","fetchProfile","response","get","headers","Authorization","data","error","console","fetchUsersPosts","children","className","style","color","fileName","_jsxFileName","lineNumber","columnNumber","firstName","lastName","email","location","occupation","to","onPostSuccess","map","postData","removePost","_c","$RefreshReg$"],"sources":["/Users/cangenis/projet-web-genis-ozgenc/client/src/pages/ProfilePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport Post from \"../components/Post\";\nimport NewPost from \"../components/NewPost\";\nimport { getUsersPostsRoute, getUserRoute } from \"../utils/APIRoutes\";\nimport \"../styles/ProfilePage.css\";\n\nfunction Profile() {\n  const { userId: profileUserId } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [profileUser, setProfileUser] = useState({});\n  const { user, token } = useAuth();\n\n  const addNewPost = (newPost) => {\n    setPosts((prevPosts) => [newPost, ...prevPosts]); // Add the new post to the top of the list\n  };\n\n  const removePostFromState = (postId) => {\n    setPosts((prevPosts) => prevPosts.filter((post) => post._id !== postId));\n  };\n\n  const fetchProfile = async () => {\n    try {\n      const response = await axios.get(`${getUserRoute}/${profileUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setProfileUser(response.data);\n    } catch (error) {\n      console.error(\"Error fetching profile:\", error);\n    }\n  };\n\n  const fetchUsersPosts = async () => {\n    try {\n      const response = await axios.get(\n        `${getUsersPostsRoute}/${profileUserId}/posts`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchProfile();\n    fetchUsersPosts();\n  }, [profileUserId, token]); // Depend on profileUserId and token to re-fetch if they change\n\n  return (\n    <>\n      <div className=\"user-section\">\n        <h1 style={{ color: \"#25547e\" }}>Organiz'Asso Profile</h1>\n        <p>\n          <strong>Name:</strong> {profileUser.firstName}\n        </p>\n        <p>\n          <strong>Surname:</strong> {profileUser.lastName}\n        </p>\n        <p>\n          <strong>Email:</strong> {profileUser.email}\n        </p>\n        <p>\n          <strong>Location:</strong> {profileUser.location}\n        </p>\n        <p>\n          <strong>Occupation:</strong> {profileUser.occupation}\n        </p>\n        <Link\n          to={`/profile/${profileUserId}/friends`}\n          className=\"friends-button\"\n        >\n          Friends\n        </Link>\n      </div>\n      {user._id === profileUserId && <NewPost onPostSuccess={addNewPost} />}\n      <h1 style={{ color: \"#25547e\" }}>Posts</h1>\n      {posts.map((post) => (\n        <Post key={post._id} postData={post} removePost={removePostFromState} />\n      ))}\n    </>\n  );\n}\n\nexport default Profile;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,wBAAwB;AAChD,OAAOC,IAAI,MAAM,oBAAoB;AACrC,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,SAASC,kBAAkB,EAAEC,YAAY,QAAQ,oBAAoB;AACrE,OAAO,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEnC,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM;IAAEC,MAAM,EAAEC;EAAc,CAAC,GAAGf,SAAS,CAAC,CAAC;EAC7C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoB,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM;IAAEsB,IAAI;IAAEC;EAAM,CAAC,GAAGlB,OAAO,CAAC,CAAC;EAEjC,MAAMmB,UAAU,GAAIC,OAAO,IAAK;IAC9BN,QAAQ,CAAEO,SAAS,IAAK,CAACD,OAAO,EAAE,GAAGC,SAAS,CAAC,CAAC,CAAC,CAAC;EACpD,CAAC;EAED,MAAMC,mBAAmB,GAAIC,MAAM,IAAK;IACtCT,QAAQ,CAAEO,SAAS,IAAKA,SAAS,CAACG,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,GAAG,KAAKH,MAAM,CAAC,CAAC;EAC1E,CAAC;EAED,MAAMI,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAM7B,KAAK,CAAC8B,GAAG,CAAE,GAAEzB,YAAa,IAAGQ,aAAc,EAAC,EAAE;QACnEkB,OAAO,EAAE;UACPC,aAAa,EAAG,UAASb,KAAM;QACjC;MACF,CAAC,CAAC;MACFF,cAAc,CAACY,QAAQ,CAACI,IAAI,CAAC;IAC/B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC;EAED,MAAME,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAMP,QAAQ,GAAG,MAAM7B,KAAK,CAAC8B,GAAG,CAC7B,GAAE1B,kBAAmB,IAAGS,aAAc,QAAO,EAC9C;QACEkB,OAAO,EAAE;UACPC,aAAa,EAAG,UAASb,KAAM;QACjC;MACF,CACF,CAAC;MACDJ,QAAQ,CAACc,QAAQ,CAACI,IAAI,CAAC;IACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C;EACF,CAAC;EAEDrC,SAAS,CAAC,MAAM;IACd+B,YAAY,CAAC,CAAC;IACdQ,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,CAACvB,aAAa,EAAEM,KAAK,CAAC,CAAC,CAAC,CAAC;;EAE5B,oBACEZ,OAAA,CAAAE,SAAA;IAAA4B,QAAA,gBACE9B,OAAA;MAAK+B,SAAS,EAAC,cAAc;MAAAD,QAAA,gBAC3B9B,OAAA;QAAIgC,KAAK,EAAE;UAAEC,KAAK,EAAE;QAAU,CAAE;QAAAH,QAAA,EAAC;MAAoB;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1DrC,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UAAA8B,QAAA,EAAQ;QAAK;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC5B,WAAW,CAAC6B,SAAS;MAAA;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC,eACJrC,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UAAA8B,QAAA,EAAQ;QAAQ;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC5B,WAAW,CAAC8B,QAAQ;MAAA;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C,CAAC,eACJrC,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UAAA8B,QAAA,EAAQ;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC5B,WAAW,CAAC+B,KAAK;MAAA;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzC,CAAC,eACJrC,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UAAA8B,QAAA,EAAQ;QAAS;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC5B,WAAW,CAACgC,QAAQ;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC,eACJrC,OAAA;QAAA8B,QAAA,gBACE9B,OAAA;UAAA8B,QAAA,EAAQ;QAAW;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAAC5B,WAAW,CAACiC,UAAU;MAAA;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eACJrC,OAAA,CAACR,IAAI;QACHmD,EAAE,EAAG,YAAWrC,aAAc,UAAU;QACxCyB,SAAS,EAAC,gBAAgB;QAAAD,QAAA,EAC3B;MAED;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EACL1B,IAAI,CAACS,GAAG,KAAKd,aAAa,iBAAIN,OAAA,CAACJ,OAAO;MAACgD,aAAa,EAAE/B;IAAW;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACrErC,OAAA;MAAIgC,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAU,CAAE;MAAAH,QAAA,EAAC;IAAK;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC1C9B,KAAK,CAACsC,GAAG,CAAE1B,IAAI,iBACdnB,OAAA,CAACL,IAAI;MAAgBmD,QAAQ,EAAE3B,IAAK;MAAC4B,UAAU,EAAE/B;IAAoB,GAA1DG,IAAI,CAACC,GAAG;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAoD,CACxE,CAAC;EAAA,eACF,CAAC;AAEP;AAACjC,EAAA,CAjFQD,OAAO;EAAA,QACoBZ,SAAS,EAGnBG,OAAO;AAAA;AAAAsD,EAAA,GAJxB7C,OAAO;AAmFhB,eAAeA,OAAO;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}