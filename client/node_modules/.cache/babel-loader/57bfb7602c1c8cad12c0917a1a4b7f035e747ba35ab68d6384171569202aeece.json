{"ast":null,"code":"var _jsxFileName = \"/Users/cangenis/projet-web-genis-ozgenc/client/src/pages/ProfilePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport Post from \"../components/Post\";\nimport NewPost from \"../components/NewPost\";\nimport { createPostRoute, getUsersPostsRoute, getUserRoute } from \"../utils/APIRoutes\";\nimport \"../styles/ProfilePage.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Profile() {\n  _s();\n  const {\n    userId: profileUserId\n  } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [postContent, setPostContent] = useState(\"\");\n  const [profileUser, setProfileUser] = useState({});\n  const {\n    user,\n    token\n  } = useAuth();\n  const addNewPost = newPost => {\n    setPosts(prevPosts => [newPost, ...prevPosts]); // Add the new post to the top of the list\n  };\n  const removePostFromState = postId => {\n    setPosts(prevPosts => prevPosts.filter(post => post._id !== postId));\n  };\n  const fetchProfile = async () => {\n    try {\n      const response = await axios.get(`${getUserRoute}/${profileUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setProfileUser(response.data);\n    } catch (error) {\n      console.error(\"Error fetching profile:\", error);\n    }\n  };\n  const fetchUsersPosts = async () => {\n    try {\n      const response = await axios.get(`${getUsersPostsRoute}/${profileUserId}/posts`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchProfile();\n    fetchUsersPosts();\n  }, [profileUserId, token]); // Depend on profileUserId and token to re-fetch if they change\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Organiz'Asso Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), \" \", profileUser.firstName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Surname:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), \" \", profileUser.lastName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), \" \", profileUser.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Location:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), \" \", profileUser.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Occupation:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), \" \", profileUser.occupation]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), user._id === profileUserId && /*#__PURE__*/_jsxDEV(Link, {\n        to: `/profile/${profileUserId}/friends`,\n        className: \"friends-button\",\n        children: \"Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), user._id === profileUserId && /*#__PURE__*/_jsxDEV(NewPost, {\n      onPostSuccess: addNewPost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n      postData: post,\n      removePost: removePostFromState\n    }, post._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true);\n}\n_s(Profile, \"CxHlaiP3/DrFgiyVTH4WiU1opIs=\", false, function () {\n  return [useParams, useAuth];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","axios","useAuth","Post","NewPost","createPostRoute","getUsersPostsRoute","getUserRoute","jsxDEV","_jsxDEV","Fragment","_Fragment","Profile","_s","userId","profileUserId","posts","setPosts","postContent","setPostContent","profileUser","setProfileUser","user","token","addNewPost","newPost","prevPosts","removePostFromState","postId","filter","post","_id","fetchProfile","response","get","headers","Authorization","data","error","console","fetchUsersPosts","children","className","fileName","_jsxFileName","lineNumber","columnNumber","firstName","lastName","email","location","occupation","to","onPostSuccess","map","postData","removePost","_c","$RefreshReg$"],"sources":["/Users/cangenis/projet-web-genis-ozgenc/client/src/pages/ProfilePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useAuth } from \"../context/AuthContext\";\nimport Post from \"../components/Post\";\nimport NewPost from \"../components/NewPost\";\nimport {\n  createPostRoute,\n  getUsersPostsRoute,\n  getUserRoute,\n} from \"../utils/APIRoutes\";\nimport \"../styles/ProfilePage.css\";\n\nfunction Profile() {\n  const { userId: profileUserId } = useParams();\n  const [posts, setPosts] = useState([]);\n  const [postContent, setPostContent] = useState(\"\");\n  const [profileUser, setProfileUser] = useState({});\n  const { user, token } = useAuth();\n\n  const addNewPost = (newPost) => {\n    setPosts((prevPosts) => [newPost, ...prevPosts]); // Add the new post to the top of the list\n  };\n\n  const removePostFromState = (postId) => {\n    setPosts((prevPosts) => prevPosts.filter((post) => post._id !== postId));\n  };\n\n  const fetchProfile = async () => {\n    try {\n      const response = await axios.get(`${getUserRoute}/${profileUserId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setProfileUser(response.data);\n    } catch (error) {\n      console.error(\"Error fetching profile:\", error);\n    }\n  };\n\n  const fetchUsersPosts = async () => {\n    try {\n      const response = await axios.get(\n        `${getUsersPostsRoute}/${profileUserId}/posts`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchProfile();\n    fetchUsersPosts();\n  }, [profileUserId, token]); // Depend on profileUserId and token to re-fetch if they change\n\n  return (\n    <>\n      <div className=\"profile-section\">\n        <h1>Organiz'Asso Profile</h1>\n        <p>\n          <strong>Name:</strong> {profileUser.firstName}\n        </p>\n        <p>\n          <strong>Surname:</strong> {profileUser.lastName}\n        </p>\n        <p>\n          <strong>Email:</strong> {profileUser.email}\n        </p>\n        <p>\n          <strong>Location:</strong> {profileUser.location}\n        </p>\n        <p>\n          <strong>Occupation:</strong> {profileUser.occupation}\n        </p>\n        {user._id === profileUserId && (\n          <Link\n            to={`/profile/${profileUserId}/friends`}\n            className=\"friends-button\"\n          >\n            Friends\n          </Link>\n        )}\n      </div>\n      {user._id === profileUserId && <NewPost onPostSuccess={addNewPost} />}\n      <h1>Posts</h1>\n      {posts.map((post) => (\n        <Post key={post._id} postData={post} removePost={removePostFromState} />\n      ))}\n    </>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}